<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pedido - Droguería Santo Remedio</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
    <link href="https://cdn.datatables.net/v/bs5/dt-2.1.2/b-3.1.0/kt-2.12.1/r-3.0.2/datatables.min.css" rel="stylesheet" />

    <link rel="shortcut icon" href="/img/brand-icon.svg" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="/css/fonts.css" />
    <link rel="stylesheet" type="text/css" href="/css/global.css" />
    <link rel="stylesheet" type="text/css" href="/css/site.css" />
    <link rel="stylesheet" type="text/css" href="/css/Header.css" />
    <link rel="stylesheet" type="text/css" href="/css/overlay.css" />
    <link rel="stylesheet" type="text/css" href="/css/pedidos.css" />
  </head>
  <body>
    <header id="header">
      <nav class="navbar navbar-expand-lg mb-3">
        <div class="container lg-fluid g-0">
          <div class="container d-flex d-lg-none">
            <button class="navbar-toggler collapsed ms-auto" type="button" data-bs-toggle="collapse" data-bs-target="#header-nav" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
              <svg xmlns="http://www.w3.org/2000/svg" class="fa-bars" height="25" width="21.88" viewBox="0 0 448 512">
                <!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
                <path fill="currentColor" d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z" />
              </svg>
              <svg xmlns="http://www.w3.org/2000/svg" class="fa-xmark" height="25" width="18.25" viewBox="0 0 384 512">
                <!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
                <path fill="currentColor" d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z" />
              </svg>
            </button>
          </div>
          <div class="container-lg collapse navbar-collapse" id="header-nav">
            <ul class="navbar-nav d-flex w-100">
              <li class="nav-item">
                <a class="nav-link" href="/">Inicio</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/pedido">Pedidos</a>
              </li>
              <li class="nav-item dropdown">
                <a href="#" class="nav-link dropdown-toggle d-flex align-items-center" id="navbarConsultas" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  <span class="d-inline-block text-truncate" style="max-width: 260px"> Consultas </span>
                  <svg xmlns="http://www.w3.org/2000/svg" height="17" width="10.63" viewBox="0 0 320 512">
                    <!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
                    <path fill="currentColor" d="M137.4 374.6c12.5 12.5 32.8 12.5 45.3 0l128-128c9.2-9.2 11.9-22.9 6.9-34.9s-16.6-19.8-29.6-19.8L32 192c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9l128 128z" />
                  </svg>
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarConsultas">
                  <a class="dropdown-item" href="/consultas" data-bs-target="#tabPedidos">Pedidos</a>
                  <a class="dropdown-item" href="/consultas?tab=facturas" data-bs-target="#tabFacturas">Facturas</a>
                  <a class="dropdown-item" href="/consultas/backorders">Backorders</a>
                </div>
              </li>
              <li class="nav-item dropdown ms-lg-auto">
                <button class="d-none d-lg-flex gap-2 align-items-center dropdown-toggle btn btn-brand-secondary rounded-pill lh-lg" id="navbarUser" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  <svg xmlns="http://www.w3.org/2000/svg" height="17" width="17" viewBox="0 0 512 512">
                    <!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
                    <path fill="currentColor" d="M406.5 399.6C387.4 352.9 341.5 320 288 320H224c-53.5 0-99.4 32.9-118.5 79.6C69.9 362.2 48 311.7 48 256C48 141.1 141.1 48 256 48s208 93.1 208 208c0 55.7-21.9 106.2-57.5 143.6zm-40.1 32.7C334.4 452.4 296.6 464 256 464s-78.4-11.6-110.5-31.7c7.3-36.7 39.7-64.3 78.5-64.3h64c38.8 0 71.2 27.6 78.5 64.3zM256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-272a40 40 0 1 1 0-80 40 40 0 1 1 0 80zm-88-40a88 88 0 1 0 176 0 88 88 0 1 0 -176 0z" />
                  </svg>
                  <span class="d-inline-block text-truncate" style="max-width: 260px">cliente@prueba.com</span>
                  <svg xmlns="http://www.w3.org/2000/svg" height="17" width="10.63" viewBox="0 0 320 512">
                    <!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
                    <path fill="currentColor" d="M137.4 374.6c12.5 12.5 32.8 12.5 45.3 0l128-128c9.2-9.2 11.9-22.9 6.9-34.9s-16.6-19.8-29.6-19.8L32 192c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9l128 128z" />
                  </svg>
                </button>
                <a href="#" class="d-lg-none nav-link dropdown-toggle d-flex align-items-center" id="navbarUser" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  <svg xmlns="http://www.w3.org/2000/svg" height="17" width="17" viewBox="0 0 512 512">
                    <!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
                    <path fill="currentColor" d="M406.5 399.6C387.4 352.9 341.5 320 288 320H224c-53.5 0-99.4 32.9-118.5 79.6C69.9 362.2 48 311.7 48 256C48 141.1 141.1 48 256 48s208 93.1 208 208c0 55.7-21.9 106.2-57.5 143.6zm-40.1 32.7C334.4 452.4 296.6 464 256 464s-78.4-11.6-110.5-31.7c7.3-36.7 39.7-64.3 78.5-64.3h64c38.8 0 71.2 27.6 78.5 64.3zM256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-272a40 40 0 1 1 0-80 40 40 0 1 1 0 80zm-88-40a88 88 0 1 0 176 0 88 88 0 1 0 -176 0z" />
                  </svg>
                  <span class="d-inline-block text-truncate" style="max-width: 260px"> cliente@prueba.com </span>
                  <svg xmlns="http://www.w3.org/2000/svg" height="17" width="10.63" viewBox="0 0 320 512">
                    <!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
                    <path fill="currentColor" d="M137.4 374.6c12.5 12.5 32.8 12.5 45.3 0l128-128c9.2-9.2 11.9-22.9 6.9-34.9s-16.6-19.8-29.6-19.8L32 192c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9l128 128z" />
                  </svg>
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarUser">
                  <a href="/centropedidos" class="dropdown-item">Centro de Pedidos</a>
                  <a href="/clientes" class="dropdown-item">Clientes</a>
                  <a href="/usuario/cambiarclave" class="dropdown-item">Cambiar Clave</a>
                  <a href="/Identity/Account/Logout?ReturnUrl=/" class="dropdown-item">Cerrar Sesión</a>
                </div>
              </li>
            </ul>
          </div>
        </div>
        <div class="etiqueta-entorno">
          <span>Entorno de pruebas</span>
        </div>
      </nav>
      <div class="container">
        <a href="https://www.drogueriasantoremedio.com" class="navbar-brand">
          <img width="222" src="/img/SR-logo-dark.png" class="attachment-medium size-medium" alt="" loading="lazy" sizes="(max-width: 300px) 100vw, 300px" />
        </a>
      </div>
    </header>
    <main role="main" class="container pb-3">
      <div class="row">
        <div class="col-lg-3 order-lg-1 mb-3">
          <div class="row row-gap-3">
            <div class="col-8 col-md-6 col-lg-12 order-md-1 mx-auto">
              <div id="carouselExampleFade" class="carousel slide carousel-fade rounded-4 overflow-hidden" data-bs-ride="carousel">
                <div class="carousel-inner">
                  <div class="carousel-item active">
                    <img src="/img/Template_Web-05.jpg" class="d-block w-100" alt="..." />
                  </div>
                  <div class="carousel-item">
                    <img src="/img/Template_Web-07.jpg" class="d-block w-100" alt="..." />
                  </div>
                  <div class="carousel-item">
                    <img src="/img/Template_Web-05.jpg" class="d-block w-100" alt="..." />
                  </div>
                  <div class="carousel-item">
                    <img src="/img/Template_Web-07.jpg" class="d-block w-100" alt="..." />
                  </div>
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="prev">
                  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                  <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="next">
                  <span class="carousel-control-next-icon" aria-hidden="true"></span>
                  <span class="visually-hidden">Next</span>
                </button>
              </div>
            </div>
            <div class="col-md-6 col-lg-12 order-md-0">
              <div class="cart">
                <h2>Pedido</h2>
                <div id="resumenDiv" class="cart__sumary">
                  <p>
                    <b>0 ítems, 0 unidades</b>
                    <br />
                    Total: 0,00
                  </p>
                </div>
                <div class="d-grid gap-2">
                  <a href="/pedido/revision" class="btn btn-brand-primary btn-lg rounded-pill fs-6">Ver Pedido</a>
                  <button class="btn btn-brand-secondary btn-lg rounded-pill fs-6" id="btnCargarPedidoExcel" data-bs-target="#modalCargarPedidoExcel" data-bs-toggle="modal">Cargar Pedido de Excel</button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-9 order-lg-0 overflow-x-auto">
          <div class="main-table">
            <div class="main-table__header">
              <p id="ClienteId" val="578" hidden>578</p>
              <div class="d-flex flex-wrap gap-3 align-items-center mb-3">
                <input type="hidden" id="IdCliente" />
                <div>
                  <button id="openBusquedaCliente" type="button" class="btn btn-brand-light rounded-pill" data-bs-toggle="modal" data-bs-target="#modalBusquedaCliente">
                    <span>Cliente</span>
                    <svg viewBox="0 0 16 16" width="16" height="16" version="1.1" class="octicon octicon-search" fill="currentColor"><path stroke="currentColor" stroke-width="1" fill-rule="evenodd" d="M15.7 13.3l-3.81-3.83A5.93 5.93 0 0 0 13 6c0-3.31-2.69-6-6-6S1 2.69 1 6s2.69 6 6 6c1.3 0 2.48-.41 3.47-1.11l3.83 3.81c.19.2.45.3.7.3.25 0 .52-.09.7-.3a.996.996 0 0 0 0-1.41v.01zM7 10.7c-2.59 0-4.7-2.11-4.7-4.7 0-2.59 2.11-4.7 4.7-4.7 2.59 0 4.7 2.11 4.7 4.7 0 2.59-2.11 4.7-4.7 4.7z"></path></svg>
                  </button>
                </div>
                <div class="text-brand-light">
                  <span id="ClienteLabel">Droguería Santo Remedio</span>
                  <p id="ClienteId" hidden=""></p>
                </div>
              </div>
              <div id="custom-search-input">
                <div class="row">
                  <div class="col-sm-5 btn-group dropdown mb-3">
                    <button class="dropdown-toggle btn btn-light lh-lg rounded-pill" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Cargar Artículos</button>
                    <div class="dropdown-menu main-table__dropdown">
                      <button class="dropdown-item" type="button" onclick="BuscaEntradas()">Últimas entradas</button>
                      <button class="dropdown-item" type="button" onclick="ListaLaboratorios()">Laboratorio</button>
                      <button class="dropdown-item" type="button" onclick="ListaOfertas()">Ofertas</button>
                    </div>
                  </div>
                  <div class="col-sm-7 mb-3">
                    <div class="input-group">
                      <input class="form-control rounded-start-pill" id="busquedaDescripcion" name="busquedaDescripcion" type="search" placeholder="Búsqueda" onkeypress="EnterBusqueda(event)" autofocus />
                      <button onclick="BuscaItems()" class="btn btn-brand-primary px-3 lh-lg rounded-end-pill">
                        <svg viewBox="0 0 16 16" width="16" height="16" version="1.1" class="octicon octicon-search" fill="currentColor">
                          <path stroke="currentColor" stroke-width="1" fill-rule="evenodd" d="M15.7 13.3l-3.81-3.83A5.93 5.93 0 0 0 13 6c0-3.31-2.69-6-6-6S1 2.69 1 6s2.69 6 6 6c1.3 0 2.48-.41 3.47-1.11l3.83 3.81c.19.2.45.3.7.3.25 0 .52-.09.7-.3a.996.996 0 0 0 0-1.41v.01zM7 10.7c-2.59 0-4.7-2.11-4.7-4.7 0-2.59 2.11-4.7 4.7-4.7 2.59 0 4.7 2.11 4.7 4.7 0 2.59-2.11 4.7-4.7 4.7z" />
                        </svg>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div>
              <div id="errorAjaxCall">
                <!-- Espacio para errores en llamadas Ajax -->
              </div>
              <table id="tablaProductos" class="display table table-hover table-striped" style="width: 100%">
                <thead>
                  <tr>
                    <th class="text-center" width="15%">Cargar</th>
                    <th width="60%">Descripción</th>
                    <th width="10%">Disponible</th>
                    <th width="15%">Precio</th>
                  </tr>
                </thead>
                <tbody id="tablaBusqueda" class="main-table__text"></tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </main>
    <footer class="footer text-light">
      <div class="container d-flex justify-content-between align-items-center flex-wrap gap-3 py-5">
        <img src="/img/SR-logo-light.png" alt="Santo Remedio Logo" width="178" />
        <span class="fs-4 fst-italic">Comprometidos con tu farmacia.</span>
        <div class="d-flex flex-column row-gap-3 text-xl-end">
          <a href="https://www.drogueriasantoremedio.com/contacto" target="_blank">Para soporte hacer click aquí</a>
          <span>C 2019-2024 Droguería Santo Remedio, C.A. [1.3.0]</span>
        </div>
      </div>
    </footer>

    <!-- Modal para agregar a carrito -->
    <div id="modalAgrega" class="modal fade" role="dialog" aria-hidden="true">
      <div id="agregaItem"></div>
    </div>

    <!-- Modal para búsqueda de cliente -->
    <div id="modalBusquedaCliente" tabindex="-1" class="modal fade" role="dialog" aria-modal="true">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header bg-brand-primary">
            <h4 class="modal-title">Búsqueda Cliente</h4>
            <button type="button" class="btn btn-brand-primary ms-auto rounded-3" data-bs-dismiss="modal" aria-label="Close">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" width="16" height="16">
                <path d="M.293.293a1 1 0 0 1 1.414 0L8 6.586 14.293.293a1 1 0 1 1 1.414 1.414L9.414 8l6.293 6.293a1 1 0 0 1-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 0 1-1.414-1.414L6.586 8 .293 1.707a1 1 0 0 1 0-1.414z"></path>
              </svg>
            </button>
          </div>
          <div class="modal-body">
            <div class="col-sm-12">
              <div id="errorAjaxCall">
                <!-- Espacio para errores en llamadas Ajax -->
              </div>
              <div id="custom-search-input">
                <div class="input-group">
                  <input class="form-control rounded-start-pill search-query" id="busquedaCliente" name="busquedaCliente" type="search" placeholder="Búsqueda" onkeypress="EnterBusqueda(event)" autofocus="" />
                  <button onclick="buscaCliente()" class="btn btn-brand-secondary px-3 lh-lg rounded-end-pill" id="busquedaClienteButton">
                    <svg viewBox="0 0 16 16" width="16" height="16" version="1.1" class="octicon octicon-search" fill="currentColor">
                      <path stroke="currentColor" stroke-width="1" fill-rule="evenodd" d="M15.7 13.3l-3.81-3.83A5.93 5.93 0 0 0 13 6c0-3.31-2.69-6-6-6S1 2.69 1 6s2.69 6 6 6c1.3 0 2.48-.41 3.47-1.11l3.83 3.81c.19.2.45.3.7.3.25 0 .52-.09.7-.3a.996.996 0 0 0 0-1.41v.01zM7 10.7c-2.59 0-4.7-2.11-4.7-4.7 0-2.59 2.11-4.7 4.7-4.7 2.59 0 4.7 2.11 4.7 4.7 0 2.59-2.11 4.7-4.7 4.7z"></path>
                    </svg>
                  </button>
                </div>
              </div>
            </div>
            <br />
            <table id="tablaClientes" class="display table table-hover table-striped" style="width: 100%">
              <thead>
                <tr>
                  <th width="20%">Id. Fiscal</th>
                  <th width="70%">Descripción</th>
                  <th width="10%">Sel.</th>
                </tr>
              </thead>
              <tbody id="tablaBusquedaCliente">
                <!-- Rows de tabla de cliente   -->
              </tbody>
            </table>
          </div>
          <div class="modal-footer">
            <button id="cierraModal" type="button" class="btn btn-brand-primary rounded-pill" data-bs-dismiss="modal">Cerrar</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal para selección de laboratorios -->
    <div id="modalLaboratorio" class="modal fade" role="dialog" tabindex="-1" aria-hidden="true">
      <div id="listaLaboratorios"></div>
    </div>

    <!-- Modal para cargar pedido de excel -->
    <div class="modal fade" id="modalCargarPedidoExcel">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header bg-brand-primary">
            <h5 class="modal-title">Cargar pedido desde Excel</h5>
          </div>
          <div class="modal-body">
            <form enctype="multipart/form-data" id="formCargarPedidoExcel" method="post" action="/Pedido/CargarPedidoDeArchivo">
              <input type="hidden" name="ClienteId" id="clienteIdInput" value="578" />
              <input type="file" id="archivoInput" name="Archivo" class="form-control" required accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" />
              <input name="__RequestVerificationToken" type="hidden" value="CfDJ8LJ1wT-wGzNCp57-0KN8nJu71-u6uMo8jcSG3tyK5b-Z46MRMJi72rkAtRxF5ryJ81tSH86MY0XiLrmIbM2SJyHTOBudrqrJxgnfWE5VX0zlQ_Do6C4qAuuqAmtyWBOx0KaMiHE-5MlTMnW00RfZIxpU4Pfq0ymSui7lVJdpypy7k42JmYAEozl0W_0s7IB96w" />
            </form>
          </div>
          <div class="modal-footer">
            <button type="submit" class="btn btn-brand-primary rounded-pill" form="formCargarPedidoExcel">Cargar</button>
            <button type="button" class="btn btn-brand-secondary rounded-pill" data-bs-dismiss="modal">Cancelar</button>
          </div>
        </div>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>

    <script src="https://cdn.datatables.net/v/bs5/dt-2.1.2/b-3.1.0/kt-2.12.1/r-3.0.2/datatables.min.js"></script>

    <script src="./js/pedido.js"></script>

    <script>
      $(function () {
        $('[data-bs-toggle="tooltip"]').tooltip();
      });
      $(function () {
        $(document).ajaxError(function (e, xhr, settings) {
          if (xhr.status == 401) {
            location = '/account/login';
          }
        });
      });
    </script>
  </body>
</html>
